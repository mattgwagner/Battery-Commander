@using BatteryCommander.Common;

@model BatteryCommander.Web.Models.BattleRosterModel

@{
    ViewBag.Title = "Battle Roster";
}

<h2>@ViewBag.Title</h2>

<div class="alert alert-warning">
    Note: DTMS is the system of record, NOT this application, for all soldier and qualification information.
    When in doubt, DTMS should be the source of truth.
</div>

<div class="table-responsive">
    <table class="table table-bordered table-striped table-responsive">
        <tr>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().Group)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().Position)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().Rank)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().LastName)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().FirstName)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().ETSDate)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().MOS)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().IsDutyMOSQualified)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().EducationLevelCompleted)</th>
            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().SecurityClearance)</th>

            @foreach (var qualification in Model.Qualifications)
            {
                <th>@Html.DisplayFor(m => qualification)</th>
            }

            <th>@Html.DisplayNameFor(m => m.Soldiers.FirstOrDefault().Notes)</th>
        </tr>

        @foreach (var soldier in Model.Soldiers)
        {
            <tr>
                <td>@Html.DisplayFor(m => soldier.Group)</td>
                <td>@Html.DisplayFor(m => soldier.Position, new { UseShortName = true })</td>
                <td>@Html.DisplayFor(m => soldier.Rank, new { UseShortName = true })</td>
                <td>@Html.ActionLink(soldier.LastName, "View", "Soldier", new { soldierId = soldier.Id }, null)</td>
                <td>@Html.ActionLink(soldier.FirstName, "View", "Soldier", new { soldierId = soldier.Id }, null)</td>
                <td>@Html.DisplayFor(m => soldier.ETSDate)</td>
                <td>@Html.DisplayFor(m => soldier.MOS, new { UseShortName = true })</td>
                <td>@Html.DisplayFor(m => soldier.IsDutyMOSQualified)</td>
                <td>@Html.DisplayFor(m => soldier.EducationLevelCompleted, new { UseShortName = true })</td>
                <td>@Html.DisplayFor(m => soldier.SecurityClearance, new { UseShortName = true })</td>

                @foreach (var qualification in Model.Qualifications)
                {
                    var soldier_qual = soldier.Qualifications.SingleOrDefault(q => q.QualificationId == qualification.Id);

                    <td>@Html.DisplayFor(m => soldier_qual)</td>
                }

                <td>@Html.DisplayFor(m => soldier.Notes)</td>
            </tr>
        }
    </table>

</div>

